<?xml version="1.0" encoding="UTF-8"?>

<project basedir="." default="build" name="de.pellepelster.myadmin.tools.test">

	<condition property="myadmin.import" value="../de.pellepelster.myadmin.build/MyAdminProjectBuild.xml" else="${myadmin.home.location}/scripts/MyAdminProjectBuild.xml">
		<available file="../de.pellepelster.myadmin.build" type="dir" />
	</condition>
	<import file="${myadmin.import}" />

	<path id="de.pellepelster.myadmin.tools.test.classpath">
		<fileset dir="${de.pellepelster.myadmin.lib.location}/commons" includes="*.jar" />
		<fileset dir="${de.pellepelster.myadmin.lib.location}/junit" includes="*.jar" />
		<fileset dir="${de.pellepelster.myadmin.lib.location}/jdbc" includes="*.jar" />
		<fileset dir="${de.pellepelster.myadmin.lib.location}/spring" includes="*.jar" />
		<fileset dir="${de.pellepelster.myadmin.lib.location}/spring-security" includes="*.jar" />
		<fileset dir="${de.pellepelster.myadmin.server.location}/dist" includes="*.jar" />
		<fileset dir="${de.pellepelster.myadmin.lib.location}/hibernate" includes="*.jar" />
		<fileset dir="${de.pellepelster.myadmin.client.core.location}/dist" includes="*.jar" />
		<fileset dir="${de.pellepelster.myadmin.db.location}/dist" includes="*.jar" />
	</path>

	<taskdef name="dictionaryimporter" classname="de.pellepelster.myadmin.tools.dictionary.DictionaryImporter" classpathref="dictionaryimporter.classpath" />

	<target name="init" depends="clean">
		<mkdir dir="${dist.location}" />
		<mkdir dir="${build.location}" />
		<mkdir dir="${test.result.location}" />
	</target>

	<target name="clean">
		<delete dir="${dist.location}" />
		<delete dir="${test.result.location}" />
		<delete dir="${build.location}" />
	</target>

	<target name="build" depends="">
	</target>

	<target name="test.import.dictionary">

		<path id="test.dictionaryimporter.classpath">
			<fileset dir="../de.pellepelster.myadmin.generator/dist" includes="*.jar" />
			<fileset dir="../de.pellepelster.myadmin.demo.generator/dist" includes="*.jar" />
		</path>

		<dictionaryimporter classpathref="test.dictionaryimporter.classpath" modelfile="classpath:model/MyAdminDemo.msl" remotepath="${remote.path}" remoteport="${remote.port}" remoteuser="${remote.username}" remotepassword="${remote.password}" remoteserver="${remote.server}" />
		
	</target>

</project>

	<!--
	
	<env key="ANT_OPTS" value="-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n" />
	
	<target name="test">

		<junit  printsummary="yes" fork="yes" haltonfailure="yes">
			<classpath refid="de.pellepelster.myadmin.tools.test.classpath" />
			<formatter type="xml" />

			<batchtest fork="yes" todir="${test.result.location}">
				<fileset dir="src">
					<include name="**/*Test.java"/>
					<exclude name="**/*Base*.java"/>
				</fileset>
			</batchtest>

		</junit>
	</target>

	<target name="build-project" depends="init">
		<echo message="${ant.project.name}" />
		<javac debug="true" debuglevel="${debuglevel}" destdir="${build.location}" source="${source}" target="${target}">
			<src path="src" />
			<classpath refid="de.pellepelster.myadmin.tools.test.classpath" />
		</javac>
	</target>

	<target name="build-refprojects">
		<echo message="${ant.project.name}" />
		<ant antfile="${de.pellepelster.myadmin.tools.location}/build.xml" inheritall="false" target="build" />

	</target>

	<target name="jar" depends="init">
		<echo message="${ant.project.name}" />
		<jar destfile="${dist.location}/${ant.project.name}.jar" basedir="${build.location}" includes="de/pellepelster/**" />
		<jar destfile="${dist.location}/${ant.project.name}-source.jar" basedir="src/" manifest="src/META-INF/MANIFEST.MF" />
	</target>
	-->	
